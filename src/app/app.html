<div class="container">
  <header>
    <h1>{{ title() }}</h1>
    <p>Enter a URL to get a short link. Open the short link to redirect to the original URL.</p>
  </header>

  <form (ngSubmit)="onSubmit()" class="form">
    <input
      type="url"
      [(ngModel)]="url"
      name="url"
      placeholder="https://example.com"
      class="input"
      [disabled]="loading()"
    />
    <button type="submit" class="btn" [disabled]="loading()">
      {{ loading() ? 'Shorteningâ€¦' : 'Shorten' }}
    </button>
  </form>

  @if (error()) {
    <div class="message error" role="alert">{{ error() }}</div>
  }

  @if (result(); as res) {
    <div class="result">
      <p class="label">Short link:</p>
      <div class="link-row">
        <a [href]="getShortLink(res)" target="_blank" rel="noopener" class="short-link">
          {{ getShortLink(res) }}
        </a>
        <button type="button" class="btn btn-small" (click)="copyShortLink(res)">
          {{ copied() ? 'Copied!' : 'Copy' }}
        </button>
      </div>
      <p class="label">Original: <span class="original">{{ res.originalUrl }}</span></p>
    </div>
  }
</div>

<router-outlet />
