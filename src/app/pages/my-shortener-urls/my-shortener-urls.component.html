<app-page-breadcrumb pageTitle="My Shortener URLs" />
<div class="space-y-6">
  <app-component-card title="My Shortener URLs" desc="Short links and QR codes for your URLs.">
    @if (loading()) {
      <p class="py-8 text-center text-theme-sm text-gray-500 dark:text-gray-400">Loadingâ€¦</p>
    } @else if (error()) {
      <div class="rounded-lg border border-error-200 bg-error-50 px-4 py-3 text-theme-sm text-error-700 dark:border-error-800 dark:bg-error-500/10 dark:text-error-400" role="alert">
        {{ error() }}
      </div>
    } @else {
      <div class="overflow-hidden rounded-xl border border-gray-200 bg-white dark:border-white/[0.05] dark:bg-white/[0.03]">
        <div class="max-w-full overflow-x-auto">
          <table class="min-w-full">
            <thead class="border-b border-gray-100 dark:border-white/[0.05]">
              <tr>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">QR</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Short Code</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Full URL</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Clicks</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Created</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Expires</th>
                <th class="px-5 py-3 font-medium text-gray-500 text-start text-theme-xs dark:text-gray-400">Status</th>
              </tr>
            </thead>
            <tbody class="divide-y divide-gray-100 dark:divide-white/[0.05]">
              @if (items().length === 0) {
                <tr>
                  <td colspan="7" class="px-5 py-8 text-center text-theme-sm text-gray-500 dark:text-gray-400">
                    No short URLs yet. Create one from the Shorten page.
                  </td>
                </tr>
              }
              @for (row of items(); track row.id) {
                <tr>
                  <td class="px-5 py-4 sm:px-6 text-start">
                    <a [href]="shortLinkUrl(row.shortCode)" target="_blank" rel="noopener" class="inline-block">
                      <img
                        [src]="qrImageUrl(row.shortCode)"
                        [alt]="'QR for ' + row.shortCode"
                        width="80"
                        height="80"
                        class="rounded border border-gray-200 dark:border-gray-700"
                      />
                    </a>
                  </td>
                  <td class="px-4 py-3 text-start">
                    <a [href]="shortLinkUrl(row.shortCode)" target="_blank" rel="noopener"
                       class="font-medium text-brand-500 hover:text-brand-600 dark:text-brand-400">
                      {{ row.shortCode }}
                    </a>
                  </td>
                  <td class="max-w-[200px] px-4 py-3 text-theme-sm text-gray-500 dark:text-gray-400 truncate" [title]="row.fullUrl">
                    {{ row.fullUrl }}
                  </td>
                  <td class="px-4 py-3 text-theme-sm text-gray-800 dark:text-white/90">
                    {{ row.clickCount }}
                  </td>
                  <td class="px-4 py-3 text-theme-sm text-gray-500 dark:text-gray-400">
                    {{ formatDate(row.createdAt) }}
                  </td>
                  <td class="px-4 py-3 text-theme-sm text-gray-500 dark:text-gray-400">
                    {{ formatDate(row.expiresAt) }}
                  </td>
                  <td class="px-4 py-3 text-start">
                    <app-badge size="sm" [color]="row.active ? 'success' : 'error'">
                      {{ row.active ? 'Active' : 'Inactive' }}
                    </app-badge>
                  </td>
                </tr>
              }
            </tbody>
          </table>
        </div>
      </div>
    }
  </app-component-card>
</div>
